-- Autogenerated by migration tool on 2022-01-19 11:28:11

-- Resource: tf.data
CREATE TABLE IF NOT EXISTS "tf_data" (
	"cq_id" uuid NOT NULL,
	"cq_meta" jsonb,
	"backend_type" text,
	"backend_name" text,
	"version" bigint,
	"terraform_version" text,
	"serial" bigint,
	"lineage" text,
	CONSTRAINT tf_data_pk PRIMARY KEY(cq_id),
	UNIQUE(cq_id)
);
CREATE TABLE IF NOT EXISTS "tf_resources" (
	"cq_id" uuid NOT NULL,
	"cq_meta" jsonb,
	"tf_data_cq_id" uuid,
	"running_id" uuid,
	"module" text,
	"mode" text,
	"type" text,
	"name" text,
	"provider_path" text,
	"provider" text,
	CONSTRAINT tf_resources_pk PRIMARY KEY(cq_id),
	UNIQUE(cq_id),
	FOREIGN KEY (tf_data_cq_id) REFERENCES tf_data(cq_id) ON DELETE CASCADE
);
CREATE TABLE IF NOT EXISTS "tf_resource_instances" (
	"cq_id" uuid NOT NULL,
	"cq_meta" jsonb,
	"tf_resource_cq_id" uuid,
	"resource_id" uuid,
	"instance_id" text,
	"schema_version" bigint,
	"attributes" jsonb,
	"dependencies" text[],
	"create_before_destroy" boolean,
	CONSTRAINT tf_resource_instances_pk PRIMARY KEY(cq_id),
	UNIQUE(cq_id),
	FOREIGN KEY (tf_resource_cq_id) REFERENCES tf_resources(cq_id) ON DELETE CASCADE
);
